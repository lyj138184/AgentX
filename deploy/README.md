# AgentX éƒ¨ç½²æŒ‡å—

AgentX æä¾›ç»Ÿä¸€çš„ Docker éƒ¨ç½²è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä¸€é”®å¯åŠ¨å¤šç§ç¯å¢ƒé…ç½®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
cd deploy
./start.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å¼•å¯¼æ‚¨é€‰æ‹©éƒ¨ç½²æ¨¡å¼å¹¶å®Œæˆç¯å¢ƒé…ç½®ã€‚

### 2. ç›´æ¥æŒ‡å®šæ¨¡å¼å¯åŠ¨

```bash
# æœ¬åœ°å¼€å‘ç¯å¢ƒ
./start.sh local

# ç”Ÿäº§ç¯å¢ƒ
./start.sh production

# å¤–éƒ¨æ•°æ®åº“æ¨¡å¼
./start.sh external

# å¼€å‘ç¯å¢ƒ+ç®¡ç†å·¥å…·
./start.sh dev
```

## ğŸ“¦ éƒ¨ç½²æ¨¡å¼è¯´æ˜

### ğŸ”§ local - æœ¬åœ°å¼€å‘ç¯å¢ƒ
- **ç‰¹ç‚¹**: å†…ç½® PostgreSQLï¼Œæ”¯æŒçƒ­é‡è½½
- **é€‚ç”¨**: æ—¥å¸¸å¼€å‘è°ƒè¯•
- **é…ç½®**: åŸºäº `.env.local.example`
- **æœåŠ¡**: å‰ç«¯ + åç«¯ + æ•°æ®åº“ + æ¶ˆæ¯é˜Ÿåˆ—

### ğŸ­ production - ç”Ÿäº§ç¯å¢ƒ
- **ç‰¹ç‚¹**: å†…ç½® PostgreSQLï¼Œç”Ÿäº§ä¼˜åŒ–é…ç½®
- **é€‚ç”¨**: ä¸­å°å‹ç”Ÿäº§éƒ¨ç½²
- **é…ç½®**: åŸºäº `.env.production.example`
- **æœåŠ¡**: å‰ç«¯ + åç«¯ + æ•°æ®åº“ + æ¶ˆæ¯é˜Ÿåˆ—

### ğŸ”— external - å¤–éƒ¨æ•°æ®åº“
- **ç‰¹ç‚¹**: è¿æ¥å¤–éƒ¨ PostgreSQL æ•°æ®åº“
- **é€‚ç”¨**: å¤§å‹ç”Ÿäº§ç¯å¢ƒï¼Œæ•°æ®åº“åˆ†ç¦»éƒ¨ç½²
- **é…ç½®**: åŸºäº `.env.external.example`
- **æœåŠ¡**: å‰ç«¯ + åç«¯ + æ¶ˆæ¯é˜Ÿåˆ—

### ğŸ›  dev - å¼€å‘ç¯å¢ƒå¢å¼ºç‰ˆ
- **ç‰¹ç‚¹**: æœ¬åœ°å¼€å‘ + æ•°æ®åº“ç®¡ç†å·¥å…·
- **é€‚ç”¨**: éœ€è¦æ•°æ®åº“ç®¡ç†ç•Œé¢çš„å¼€å‘åœºæ™¯
- **é…ç½®**: åŸºäº `.env.local.example`
- **æœåŠ¡**: å‰ç«¯ + åç«¯ + æ•°æ®åº“ + æ¶ˆæ¯é˜Ÿåˆ— + Adminer

## ğŸŒ æœåŠ¡è®¿é—®åœ°å€

å¯åŠ¨å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®æœåŠ¡ï¼š

- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯API**: http://localhost:8080
- **APIæ–‡æ¡£**: http://localhost:8080/swagger-ui.html
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/api/health
- **æ•°æ®åº“ç®¡ç†** (ä»…devæ¨¡å¼): http://localhost:8081

## ğŸ‘¤ é»˜è®¤è´¦å·

### ç®¡ç†å‘˜è´¦å·
- **é‚®ç®±**: admin@agentx.ai
- **å¯†ç **: admin123

### æµ‹è¯•è´¦å· (ä»…å¼€å‘ç¯å¢ƒ)
- **é‚®ç®±**: test@agentx.ai  
- **å¯†ç **: test123

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### ç¯å¢ƒå˜é‡æ¨¡æ¿
- `.env.local.example` - æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®
- `.env.production.example` - ç”Ÿäº§ç¯å¢ƒé…ç½®
- `.env.external.example` - å¤–éƒ¨æ•°æ®åº“é…ç½®

### è‡ªå®šä¹‰é…ç½®
1. å¤åˆ¶å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ä¸º `.env`
2. æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®å‚æ•°
3. é‡æ–°å¯åŠ¨æœåŠ¡ç”Ÿæ•ˆ

## ğŸ›  å¸¸ç”¨æ“ä½œ

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker compose ps
```

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose logs -f agentx-backend
docker compose logs -f agentx-frontend
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker compose restart agentx-backend
```

### åœæ­¢æœåŠ¡
```bash
docker compose down
```

### å®Œå…¨é‡å»º
```bash
docker compose down
docker compose up -d --build
```

## ğŸ“Š æ•°æ®ç®¡ç†

### æ•°æ®æŒä¹…åŒ–
æ•°æ®å­˜å‚¨åœ¨ Docker volumes ä¸­ï¼š
- `postgres-data` - æ•°æ®åº“æ•°æ®
- `rabbitmq-data` - æ¶ˆæ¯é˜Ÿåˆ—æ•°æ®
- `storage-data` - åº”ç”¨æ–‡ä»¶å­˜å‚¨

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
docker exec agentx-postgres pg_dump -U agentx_user agentx > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i agentx-postgres psql -U agentx_user agentx < backup.sql
```

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å†²çª
æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000  # å‰ç«¯
lsof -i :8080  # åç«¯
lsof -i :5432  # æ•°æ®åº“
```

ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ç«¯å£é…ç½®ï¼š
```env
FRONTEND_PORT=3001
BACKEND_PORT=8081
POSTGRES_PORT=5433
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€ï¼š
```bash
docker compose logs postgres
```

éªŒè¯æ•°æ®åº“è¿æ¥ï¼š
```bash
docker exec agentx-postgres pg_isready -U agentx_user
```

#### 3. æœåŠ¡å¯åŠ¨å¤±è´¥
æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—ï¼š
```bash
docker compose logs agentx-backend
```

æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•ï¼š
```bash
docker compose config
```

### è°ƒè¯•æ¨¡å¼

å¼€å‘ç¯å¢ƒæ”¯æŒè¿œç¨‹è°ƒè¯•ï¼š
- **è°ƒè¯•ç«¯å£**: 5005
- **è¿æ¥æ–¹å¼**: Remote JVM Debug

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
1. **å†…å­˜é…ç½®**: æ ¹æ®æœåŠ¡å™¨é…ç½®è°ƒæ•´ JVM å‚æ•°
2. **æ•°æ®åº“ä¼˜åŒ–**: é…ç½®åˆé€‚çš„è¿æ¥æ± å¤§å°
3. **æ—¥å¿—çº§åˆ«**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ `warn` æˆ– `error` çº§åˆ«
4. **å®‰å…¨é…ç½®**: ä¿®æ”¹é»˜è®¤å¯†ç å’Œå¯†é’¥

### ç›‘æ§å»ºè®®
- å¯ç”¨å¥åº·æ£€æŸ¥ç›‘æ§
- é…ç½®æ—¥å¿—æ”¶é›†
- ç›‘æ§å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹çš„é…ç½®
- æ•°æ®åº“å¯†ç ï¼š`DB_PASSWORD`
- JWTå¯†é’¥ï¼š`JWT_SECRET`
- ç®¡ç†å‘˜å¯†ç ï¼š`AGENTX_ADMIN_PASSWORD`
- æ¶ˆæ¯é˜Ÿåˆ—å¯†ç ï¼š`RABBITMQ_PASSWORD`

### ç½‘ç»œå®‰å…¨
- ä½¿ç”¨ HTTPSï¼ˆé€šè¿‡åå‘ä»£ç†ï¼‰
- é™åˆ¶æ•°æ®åº“ç«¯å£å¯¹å¤–æš´éœ²
- é…ç½®é˜²ç«å¢™è§„åˆ™

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. [æ•…éšœæ’æŸ¥æ–‡æ¡£](../docs/deployment/TROUBLESHOOTING.md)
2. [é¡¹ç›®README](../README.md)
3. [GitHub Issues](https://github.com/your-repo/AgentX/issues)

---

*æ›´æ–°æ—¶é—´: 2025-01-08*